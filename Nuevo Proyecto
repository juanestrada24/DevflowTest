import streamlit as st
from utils.calculos import calcular_ficha_inversion

st.title("üèóÔ∏è Nuevo Proyecto - Underwriting")

with st.form("form_underwriting"):
    col1, col2 = st.columns(2)
    with col1:
        precio = st.number_input("Precio de compra ($)", min_value=0)
        arv = st.number_input("ARV (valor tras renovaci√≥n) ($)", min_value=0)
        renovacion = st.number_input("Costo de renovaci√≥n ($)", min_value=0)
        comision = st.number_input("Comisi√≥n de venta (%)", min_value=0.0, value=5.0)
        cierre = st.number_input("Gastos de cierre (%)", min_value=0.0, value=1.5)

    with col2:
        tasa_prestamo = st.number_input("Tasa pr√©stamo anual (%)", min_value=0.0, value=12.0)
        porcentaje_financiado = st.number_input("% financiado por lender", min_value=0.0, value=70.0)
        tasa_gap = st.number_input("Tasa preferente GAP (%)", min_value=0.0, value=10.0)
        meses = st.number_input("Tiempo de ejecuci√≥n (meses)", min_value=1, value=4)

    submitted = st.form_submit_button("Calcular")

if submitted:
    ficha = calcular_ficha_inversion(precio, arv, renovacion, comision, tasa_prestamo, porcentaje_financiado, tasa_gap, meses, cierre)
    st.write(ficha)
